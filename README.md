# Shito Translation
This repository is for the tool used to translate the game. If you're looking for the English patch, click [here](http://www.romhacking.net/translations/6024/).  
## Setup
Create a "ShitoData" folder and copy the rom as "shito.ws" in it.   
Download [this](https://gist.github.com/Illidanz/539f84ffd6e7dcbc0126dacad99b616b) file as "table_input.txt" in the ShitoData folder.  
## Run from binary
Download the latest [release](https://github.com/Illidanz/ShitoTranslation/releases) outside the ShitoData folder.  
Run `tool extract` to extract everything and `tool repack` to repack after editing.  
Run `tool extract --help` or `tool repack --help` for more info.  
## Run from source
Install [Python 3.8](https://www.python.org/downloads/) and pipenv.  
Download [nasm](https://www.nasm.us/).  
Download xdelta.exe.  
Run `pipenv sync`.  
Run the tool with `pipenv run tool.py` or build with `pipenv run pyinstaller tool.spec`.  
## Font Editing
Edit `font.png`. Normal glyphs should be 7 pixels long, aligned to the left. Large glyphs should be 15 pixels long.  
The glyphs should be in the same order as the `fontconfig.txt` file, where you should also specify the glyph size.  
To fit more character in short binary lines, you can add bigrams here and don't specify a length. These will be automatically generated by the font repacker.  
Format example (set A and a to 5 pixels of width, and generate bigrams for "Un" and "it" to fit "Unit" in 2 bytes):
```
A=5
a=5
Un=
it=
```
## Text Editing
Rename the \*\_output.txt files to \*\_input.txt (script_output.txt to script_input.txt, etc) and add translations for each line after the `=` sign.  
The text in script_input is automatically wordwrapped, but a `|` can be used to force a line break.  
New textboxes can be added by appending `>>` followed by the new text.  
Control codes are specified as `<XXXX>`, they should usually be kept.  
Comments can be added at the end of lines by using `#`  
## Image Editing
### Using images.txt
Create or edit the `images.txt` file in the ShitoData folder using this format:
```
!FILE:bank_18.bin
bank_18_01=a50,1200,8,1,1
```
The parameters are:
* Offset of the tile data
* Offset of the map data
* Number of contiguous images in the map data using the same tiles
* Set to 1 to read the palette for image export
* Set to 1 to write new palette data, instead of using the original ones
### Manual
Copy the bank you want to edit from the "extract" folder to the "replace" folder (create it if it doesn't exist)  and edit it directly.  
