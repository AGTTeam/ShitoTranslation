# Shito Translation
This repository is for the tool used to translate the game. If you're looking for the English patch, click [here](https://agtteam.net/shito).  
## Setup
Install [Python 3](https://www.python.org/downloads/).  
Download this repository by downloading and extracting it, or cloning it.  
Copy the original Japanese rom into the same folder and rename it as `shito.ws`.  
Run `run_windows.bat` (for Windows) or `run_bash` (for OSX/Linux) to run the tool.  
Download [this](https://gist.github.com/Illidanz/539f84ffd6e7dcbc0126dacad99b616b) file as `table_input.txt` in the ShitoData folder.  
## Font Editing
Edit `font.png`. Normal glyphs should be 7 pixels long, aligned to the left. Large glyphs should be 15 pixels long.  
The glyphs should be in the same order as the `fontconfig.txt` file, where you should also specify the glyph size.  
To fit more character in short binary lines, you can add bigrams here and don't specify a length. These will be automatically generated by the font repacker.  
Format example (set A and a to 5 pixels of width, and generate bigrams for "Un" and "it" to fit "Unit" in 2 bytes):
```
A=5
a=5
Un=
it=
```
## Text Editing
Rename the \*\_output.txt files to \*\_input.txt (script_output.txt to script_input.txt, etc) and add translations for each line after the `=` sign.  
The text in script_input is automatically wordwrapped, but a `|` can be used to force a line break.  
New textboxes can be added by appending `>>` followed by the new text.  
Control codes are specified as `<XXXX>`, they should usually be kept.  
Comments can be added at the end of lines by using `#`  
## Image Editing
### Using images.txt
Create or edit the `images.txt` file in the ShitoData folder using this format:
```
!FILE:bank_18.bin
bank_18_01=a50,1200,8,1,1
```
The parameters are:
* Offset of the tile data
* Offset of the map data
* Number of contiguous images in the map data using the same tiles
* Set to 1 to read the palette for image export
* Set to 1 to write new palette data, instead of using the original ones
### Manual
Copy the bank you want to edit from the "extract" folder to the "replace" folder (create it if it doesn't exist) and edit it directly.  
## Run from command line
This is not recommended if you're not familiar with Python and the command line.  
After following the Setup section, run `pipenv sync` to install dependencies.  
Run `pipenv run python tool.py extract` to extract everything, and `pipenv run python tool.py repack` to repack.  
You can use switches like `pipenv run python tool.py repack --bin` to only repack certain parts to speed up the process.  
